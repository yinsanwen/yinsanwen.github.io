<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>sanwen's blog - properties</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">sanwen's blog </a></h1>
                <nav><ul>
                    <li><a href="/category/j2ee.html">j2EE</a></li>
                    <li><a href="/category/java-web.html">Java Web</a></li>
                    <li><a href="/category/python.html">Python</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/tips-in-javaweb.html">tips-in-javaweb</a></h1>
<footer class="post-info">
        <abbr class="published" title="2014-04-08T00:00:00">
                Published: 二 08 四月 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/sanwen.html">sanwen</a>
        </address>
<p>In <a href="/category/java-web.html">Java Web</a>. </p>
<p>tags: <a href="/tag/properties.html">properties</a> </p>
</footer><!-- /.post-info --><h2>Tip 1. 使用配置文件</h2>
<p>定义一个配置文件，存放需要配置的信息。假设文件名为config.properties。</p>
<div class="highlight"><pre># email configuration #
system.email=267237033@qq.com
system.email.pwd=ysw6117908128
</pre></div>


<p>如何使用该配置文件？</p>
<h3>方法一 在Spring的配置文件xml中使用</h3>
<ol>
<li>
<p>使用<code>&lt;context:property-placeholder /&gt;</code>标签，加载配置文件。</p>
</li>
<li>
<p>在需要的地方通过<code>${name}</code>来使用。</p>
</li>
</ol>
<p>实例：</p>
<div class="highlight"><pre><span class="c">&lt;!-- 加载配置文件 --&gt;</span>
<span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&quot;classpath:config.properties&quot;</span><span class="nt">/&gt;</span>

<span class="c">&lt;!-- email start --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;mailSender&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;host&quot;</span> <span class="na">value=</span><span class="s">&quot;smtp.qq.com&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;defaultEncoding&quot;</span> <span class="na">value=</span><span class="s">&quot;UTF-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;${system.email}&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;${system.email.pwd}&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;javaMailProperties&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;props&gt;</span>
                <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&quot;mail.debug&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/prop&gt;</span>
                <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&quot;mail.smtp.auth&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/prop&gt;</span>
            <span class="nt">&lt;/props&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
</pre></div>


<h3>方法二 使用<code>java.util.Properties</code>类</h3>
<ol>
<li>
<p>使用单例模式创建Properties工厂类。</p>
</li>
<li>
<p>使用工厂得到一个Properties实例，得到属性值。</p>
</li>
</ol>
<p>实例：</p>
<div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">neuropeptide</span><span class="o">.</span><span class="na">tools</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * 单例模式读取属性配置文件</span>
<span class="cm"> * @author HF</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PropertiesFactoryHelper</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">PropertiesFactoryHelper</span> <span class="n">_instance</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Properties</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>

    <span class="cm">/**</span>
<span class="cm">     * 私有构造方法</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="nf">PropertiesFactoryHelper</span><span class="o">()</span> <span class="o">{</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;/config.properties&quot;</span><span class="o">);</span>
            <span class="n">properties</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">inputStream</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                <span class="n">inputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span> <span class="o">+</span> <span class="s">&quot;file not found&quot;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 单例静态工厂方法</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
    <span class="kd">synchronized</span> <span class="kd">public</span> <span class="kd">static</span> <span class="n">PropertiesFactoryHelper</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">_instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
            <span class="n">_instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PropertiesFactoryHelper</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">_instance</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 读取配置信息</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getConfig</span><span class="o">(</span><span class="n">String</span> <span class="n">key</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">properties</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>


<p>在需要的类中使用上面的工厂得到实例，并进行取值。</p>
<div class="highlight"><pre><span class="n">PropertiesFactoryHelper</span> <span class="n">propeties</span> <span class="o">=</span> <span class="n">PropertiesFactoryHelper</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

<span class="n">String</span> <span class="n">systemEmail</span> <span class="o">=</span> <span class="n">propeties</span><span class="o">.</span><span class="na">getConfig</span><span class="o">(</span><span class="s">&quot;system.email&quot;</span><span class="o">);</span>
</pre></div>                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>